/*!
 * jQuery Chrony - A Count Down Plugin
 *
 * Licensed under The MIT License
 *
 * @version        0.1.0
 * @author         Washington Botelho
 * @documentation  wbotelhos.com/chrony
 *
 */

;(function(b){var a={init:function(c){return this.each(function(){var m=b(this),f=b.extend({},b.fn.chrony.defaults,c),e=m.data("options",f).attr("id"),k='<span style="float: left;">:</span>';if(f.text){var p=f.text.split(":");if(p.length!=3){b.error("The format must be the following HH:mm:ss!");}f.second=p[2];f.minute=p[1];f.hour=p[0];}else{if(f.hours){if(f.hours>=24){f.hour=23;f.minute=59;f.second=59;}else{f.second=0;f.minute=0;f.hour=f.hours;}}else{if(f.minutes){f.second=0;f.minute=f.minutes%60;f.hour=(f.minutes-f.minute)/60;}else{if(f.seconds){f.second=f.seconds%60;f.minute=((f.seconds-f.second)/60)%60;f.hour=((f.seconds-f.second)-(f.minute*60))/60/60;}}}}var q=a.checkTime(f.hour,f.minute,f.second);if(q){m.html('<div style="color: #F00; font-size: 9px;">Number out of range!</div>');b.error(q);}var j=a.getNumber(f.hour),i=a.getNumber(f.minute),g=a.getNumber(f.second),h=b("<div/>",{id:"hour",html:j,style:"float: left;"}),o=b("<div/>",{id:"minute",html:i,style:"float: left;"}),n=b("<div/>",{id:"second",html:g,style:"float: left;"}),d=0;if(e===undefined){e="chrony-"+m.index();m.attr("id",e);}m.append(h).append(k).append(o).append(k).append(n);var l=m.children("span");if(f.alert){if(!f.alert.color){f.alert.color="#F00";}if(!f.alert.hour){f.alert.hour=0;}if(!f.alert.minute){f.alert.minute=0;}if(!f.alert.second){f.alert.second=0;}}a.checkAlert.apply(m,[f.alert,j,i,g]);d=setInterval(function(){if(f.blink){l.fadeOut(f.blinkTime,function(){b(this).fadeIn(f.blinkTime);});}if(g==0){if(i==0){if(j>0){j=a.getNumber(j-f.decrement);i=59;g=59;h.html(j);o.html(i);n.html(g);}}else{i=a.getNumber(i-f.decrement);g=59;o.html(i);n.html(g);}}else{g=a.getNumber(g-f.decrement);n.html(g);}if(f.finish&&g==0&&i==0&&j==0){f.finish.call(m);clearInterval(d);}a.checkAlert.apply(m,[f.alert,j,i,g]);},1000);});},checkAlert:function(f,c,e,d){if(f&&this.css("color")!=""){if(c<=f.hour&&e<=f.minute&&d<=f.second){this.css("color",f.color);}}},checkTime:function(c,e,d){if(c<0||c>24){return"The hour must be >= 0 or <= 24";}if(e<0||e>59){return"The minute must be >= 0 or <= 59";}if(d<0||d>59){return"The second must be >= 0 or <= 59";}},getNumber:function(c){return(c<10)?"0"+((c<0)?"0":c):c;}};b.fn.chrony=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1));}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments);}else{b.error("Method "+c+" does not exist!");}}};b.fn.chrony.defaults={alert:{color:"#F00",hour:0,minute:0,second:10},blink:false,blinkTime:130,finish:undefined,decrement:1,hour:0,hours:undefined,minute:0,minutes:undefined,second:0,seconds:undefined,text:undefined};})(jQuery);